<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kathyå•è¯å¤§å¸ˆè®­ç»ƒè¥</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <style>
        /* åŸºç¡€æ ·å¼ä¿æŒä¸å˜ï¼Œç¡®ä¿ç®€æ´ */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Microsoft YaHei', Arial, sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        .header { background: linear-gradient(135deg, #2C3E50 0%, #4A6491 100%); color: white; padding: 30px; text-align: center; }
        .header h1 { font-size: 2em; margin-bottom: 10px; color: #F1C40F; }
        .main-content { padding: 30px; }
        .screen { display: none; }
        .screen.active { display: block; }
        .btn { background: #4CAF50; color: white; border: none; padding: 12px 24px; margin: 10px; border-radius: 8px; cursor: pointer; font-size: 16px; }
        .btn:hover { background: #45a049; }
        .btn-blue { background: #2196F3; }
        .btn-red { background: #F44336; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš¡ Kathyå•è¯å¤§å¸ˆè®­ç»ƒè¥</h1>
            <h2 style="color: white;">å¿«æ¥èƒŒå•è¯ï¼</h2>
        </div>
        
        <div class="main-content">
            <!-- ç™»å½•ç•Œé¢ -->
            <div id="login-screen" class="screen active">
                <div style="text-align: center;">
                    <h2>ç”¨æˆ·ç™»å½• / æ³¨å†Œ</h2>
                    <input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" style="padding:15px; width:300px; margin:15px 0; border-radius:8px; border:1px solid #ddd;">
                    
                    <div style="margin: 20px 0;">
                        <button class="btn" onclick="handleLogin()">ç™»å½•</button>
                        <button class="btn btn-blue" onclick="handleRegister()">æ³¨å†Œ</button>
                    </div>
                    
                    <div style="background:#07C160; color:white; padding:12px 25px; border-radius:25px; display:inline-block; margin:20px 0;">
                        å¾®ä¿¡è”ç³»ï¼š<strong>Kathy151</strong>
                    </div>
                </div>
            </div>
            
            <!-- ä¸»èœå• -->
            <div id="menu-screen" class="screen">
                <h2 id="welcome-message" style="text-align:center;">æ¬¢è¿</h2>
                
                <div style="text-align:center; margin:30px 0;">
                    <p>å·²æˆåŠŸç™»å½•ï¼</p>
                    <button class="btn" onclick="startTraining()">å¼€å§‹è®­ç»ƒ</button>
                    <button class="btn btn-blue" onclick="addWords()">æ·»åŠ å•è¯</button>
                    <button class="btn btn-red" onclick="logout()">é€€å‡º</button>
                </div>
            </div>
            
            <!-- è®­ç»ƒç•Œé¢ -->
            <div id="train-screen" class="screen">
                <h2 style="text-align:center;">å•è¯è®­ç»ƒ</h2>
                <div style="text-align:center; margin:30px 0;">
                    <div id="word-card" style="height:200px; background:#f0f0f0; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:2em;">
                        å•è¯å¡ç‰‡
                    </div>
                    <div style="margin:20px 0;">
                        <button class="btn" onclick="markRemember()">è®°å¾—</button>
                        <button class="btn btn-blue" onclick="markForget()">å¿˜è®°</button>
                        <button class="btn btn-red" onclick="showMenu()">è¿”å›</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç®€åŒ–ç‰ˆæœ¬ - ç¡®ä¿åŸºæœ¬åŠŸèƒ½å¯ç”¨
        console.log('âœ… è„šæœ¬å¼€å§‹æ‰§è¡Œ');
        
        // 1. é¡µé¢åˆ‡æ¢å‡½æ•°
        function showScreen(screenId) {
            console.log('åˆ‡æ¢åˆ°é¡µé¢:', screenId);
            
            // éšè—æ‰€æœ‰
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            // æ˜¾ç¤ºç›®æ ‡
            const target = document.getElementById(screenId);
            if (target) {
                target.classList.add('active');
                console.log('âœ… é¡µé¢åˆ‡æ¢æˆåŠŸ');
            }
        }
        
        // 2. ç™»å½•/æ³¨å†Œå‡½æ•°
        function handleLogin() {
            const username = document.getElementById('username').value.trim();
            console.log('ç™»å½•å°è¯•ï¼Œç”¨æˆ·å:', username);
            
            if (!username) {
                alert('è¯·è¾“å…¥ç”¨æˆ·å');
                return;
            }
            
            if (username === 'kathy151') {
                // æ•™å¸ˆç™»å½•
                document.getElementById('welcome-message').textContent = 'ğŸ‘‘ æ¬¢è¿ï¼ŒKathyè€å¸ˆï¼';
            } else {
                // å­¦ç”Ÿç™»å½•
                document.getElementById('welcome-message').textContent = `ğŸ“ æ¬¢è¿ï¼Œ${username}ï¼`;
            }
            
            showScreen('menu-screen');
        }
        
        function handleRegister() {
            const username = document.getElementById('username').value.trim();
            console.log('æ³¨å†Œå°è¯•ï¼Œç”¨æˆ·å:', username);
            
            if (!username) {
                alert('è¯·è¾“å…¥ç”¨æˆ·å');
                return;
            }
            
            if (username.length < 2) {
                alert('ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦');
                return;
            }
            
            document.getElementById('welcome-message').textContent = `ğŸ“ æ¬¢è¿ï¼Œ${username}ï¼`;
            showScreen('menu-screen');
            
            alert(`âœ… æ¬¢è¿ ${username} åŠ å…¥ï¼`);
        }
        
        // 3. å…¶ä»–åŠŸèƒ½
        function startTraining() {
            showScreen('train-screen');
        }
        
        function addWords() {
            const words = prompt('è¾“å…¥å•è¯ï¼ˆæ ¼å¼ï¼šè‹±æ–‡ ä¸­æ–‡ï¼‰ï¼š');
            if (words) {
                alert(`æ·»åŠ äº†å•è¯: ${words}`);
            }
        }
        
        function showMenu() {
            showScreen('menu-screen');
        }
        
        function markRemember() {
            alert('æ ‡è®°ä¸ºï¼šè®°å¾—');
        }
        
        function markForget() {
            alert('æ ‡è®°ä¸ºï¼šå¿˜è®°');
        }
        
        function logout() {
            document.getElementById('username').value = '';
            showScreen('login-screen');
        }
        
        // 4. é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', function() {
            console.log('âœ… é¡µé¢åŠ è½½å®Œæˆ');
            // ç»‘å®šå›è½¦é”®
            document.getElementById('username').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleLogin();
            });
        });
        
        // 5. é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            console.error('é¡µé¢é”™è¯¯:', e.message, 'åœ¨:', e.filename, 'è¡Œ:', e.lineno);
        });
    </script>
</body>
</html>
